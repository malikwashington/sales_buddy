{% extends 'loggedin.html' %}

{% block title %}Phone{% endblock %}

{% block head %}
<link rel="stylesheet" href="static/css/call_settings.css">
{% endblock %}

{% block nr_extra %}
<li class="nav-item">
  <a 
  data-bs-toggle="modal" 
  data-bs-target="#newContactModal" 
  class="nav-link"
  href="#">
  Create New Contact
</a>
</li>
{% endblock %}

{% block body%}
<h1>Phone Calls</h1>
<br>
<br>
<div class="container my-5 py-5">

      <button class="btn buttons btn-primary border m-2" id="startup-button">Start up the Device</button>
  <main class="row" id="controls">
      <section class="left-column col col-sm" id="info">
        <h2>Your Device Info</h2>
        <div id="client-name"></div>
        <div id="output-selection" class="hide">
          <label>Ringtone Devices</label>
          <select id="ringtone-devices" multiple></select>
          <label>Speaker Devices</label>
          <select id="speaker-devices" multiple></select
          ><br />
          <button class="btn buttons btn-primary border m-2" id="get-devices">Seeing "Unknown" devices?</button>
        </div>
      </section>
      <section class="center-column col col-sm">
        <h2 class="instructions">Make a Call</h2>
        <div id="call-controls" class="hide">
          <form>
            <label for="phone-number"
              >Enter a phone number</label
            >
            <input id="phone-number" type="text" placeholder="+15552221234" />
            <button class="btn buttons btn-primary border m-2" id="button-call" type="submit">Call</button>
          </form>
          <button id="button-hangup-outgoing" class="hide btn btn-danger buttons border">Hang Up</button>
          <div id="incoming-call" class="hide">
            <h2>Incoming Call Controls</h2>
            <p class="instructions">
              Incoming Call from <span id="incoming-number"></span>
            </p>
            <button class="btn buttons btn-success border m-2" id="button-accept-incoming">Accept</button>
            <button class="btn buttons btn-danger border m-2" id="button-reject-incoming">Reject</button>
            <button class="btn buttons btn-primary border m-2" id="button-hangup-incoming" class="hide">Hangup</button>
          </div>
          <div id="volume-indicators" class="hide">
            <label>Mic Volume</label>
            <div id="input-volume"></div>
            <br /><br />
            <label>Speaker Volume</label>
            <div id="output-volume"></div>
          </div>
        </div>
      </section>
      <section class="right-column col col-sm">
        <h2>Event Log</h2>
        <div class="hide" id="log"></div>
      </section>
    </main>

  </div>
  
  {% endblock %}
  
  {% include "./modals/new_contact_modal.html" %}

  {% block scripts %}
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="../static/js/twilio.js"></script>
  <script src="../static/js/quickstart.js"></script>

{% endblock %}
